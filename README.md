# GameWatch OCR 使用说明书 (本地离线版)

## 简介
GameWatch OCR 是一款完全运行在浏览器本地的游戏掉线监控工具。它利用 **Tesseract.js** 进行本地图像文字识别 (OCR)，无需上传图片到云端，也无需配置 Google API Key。

当检测到屏幕上出现“网络错误”、“请重新登录”或“掉线”等关键字时，它会通过**本地语音播报**、**喵提醒**（微信推送）或其他 Webhook 方式通知您。

## 功能特点
1.  **本地 OCR 识别**：
    *   完全离线运行，保护隐私。
    *   针对中文游戏优化，自动处理文字间的空格问题（如识别到“网 络 错 误”也能正确报警）。
    *   无需申请复杂的 API Key。
2.  **多重报警方式**：
    *   **[新增] 本地语音告警**：调用浏览器 TTS 能力，掉线时大声朗读“游戏掉线了，请尽快重新登录”。
    *   **喵提醒/Webhook**：支持微信推送和自定义 HTTP 回调。
3.  **智能防误触**：
    *   检测到关键字后进行 15秒 持续验证。
    *   确认掉线后，每 60秒 推送一次通知。
4.  **诊断工具**：
    *   **[新增] OCR 诊断模式**：可以在设置中上传截图，查看机器到底识别出了什么文字，方便调试。

## 快速开始

### 第一步：获取喵码 (可选，用于微信通知)
1.  打开浏览器访问 [喵提醒官网](http://miaotixing.com/)。
2.  注册账号并登录。
3.  关注“喵提醒”微信公众号。
4.  在后台创建一个新的提醒，您将获得一个**“喵码”**（例如：`t123456`）。

### 第二步：配置 GameWatch
1.  打开本应用。
2.  点击右上角的 **设置 (Settings)** 图标。
3.  **报警设置**：
    *   **本地语音告警**：建议开启。开启后，您可以点击“试听”测试音量。
    *   **喵提醒 喵码**：粘贴您获取的“喵码”。
4.  **OCR 诊断 (调试用)**：
    *   如果您发现掉线了没报警，可以在这里上传一张掉线时的截图。
    *   系统会显示识别到的“原文”和“处理后文本”，帮助您判断是否是关键字匹配问题。
5.  点击 **保存并返回**。

### 第三步：启动监控
1.  点击主界面中央的 **开始屏幕捕获** 按钮。
2.  在弹出的浏览器窗口中，选择 **“窗口”** 或 **“整个屏幕”**。
    *   *建议：直接选择游戏所在的窗口。*
3.  画面出现在应用中后，点击下方的 **恢复监控** 按钮。
4.  应用状态将变为 **监控中 (OCR)**。

## 常见问题
**Q: 需要 Google API Key 吗？**
A: **不需要**。此版本使用的是本地 OCR 引擎 (Tesseract.js)，模型文件会自动下载并在浏览器中运行。

**Q: 识别率不高怎么办？**
A: 
1. 确保游戏画面清晰，不要被其他窗口遮挡。
2. 可以在“设置”中使用“OCR 诊断工具”上传截图，看看系统识别出了什么。
3. 如果识别出的文字中间有空格（如“网 络 错 误”），系统已内置自动去空格逻辑，通常可以正常识别。

**Q: 报警太频繁/太慢？**
A: 可以在设置中调整“检测间隔”。默认每 5 秒检测一次。

**Q: 关闭网页后还在监控吗？**
A: 不在。网页关闭后监控即停止。

---

## 🛠️ 本地开发与运行指南 (Developers)

如果您是开发者，或者希望在本地电脑通过源码运行此项目，请按照以下步骤操作。

### 1. 环境准备 (安装 Node.js)
本项目基于 Node.js 开发。
1.  访问 [Node.js 官方网站](https://nodejs.org/)。
2.  下载并安装 **LTS 版本** (推荐 v18 或更高版本)。
3.  安装完成后，打开终端（Windows 下是 CMD 或 PowerShell，Mac 下是 Terminal），输入以下命令检查是否安装成功：
    ```bash
    node -v
    npm -v
    ```
    *如果能看到版本号，说明安装成功。*

### 2. 安装依赖与启动
1.  **下载代码**：将本项目所有文件下载到您电脑的一个文件夹中。
2.  **安装依赖**：
    在终端中进入该文件夹目录，运行以下命令安装项目所需的库（如 React, Tesseract.js 等）：
    ```bash
    npm install
    ```
3.  **启动开发服务器**：
    安装完成后，运行：
    ```bash
    npm run dev
    ```
4.  **访问应用**：
    终端会显示一个地址（通常是 `http://localhost:5173`）。在浏览器中打开该地址即可开始使用。

### 3. 构建生产版本 (可选)
如果您需要将项目部署到静态网站托管服务（如 Vercel, Netlify, GitHub Pages）：
```bash
npm run build
```
构建完成后，生成的静态文件将位于 `dist` 目录中。