# GameWatch OCR 使用说明书 (本地离线版)

## 简介
GameWatch OCR 是一款完全运行在浏览器本地的游戏掉线监控工具。它利用 **Tesseract.js** 进行本地图像文字识别 (OCR)，无需上传图片到云端，也无需配置 Google API Key。

当检测到屏幕上出现“网络错误”、“请重新登录”或“掉线”等关键字时，它会通过**本地语音播报**、**喵提醒**（微信推送）或其他 Webhook 方式通知您。

## 功能特点
1.  **本地 OCR 识别**：
    *   完全离线运行，保护隐私。
    *   针对中文游戏优化，自动处理文字间的空格问题（如识别到“网 络 错 误”也能正确报警）。
    *   无需申请复杂的 API Key。
2.  **多重报警方式**：
    *   **[新增] 本地语音告警**：调用浏览器 TTS 能力，掉线时大声朗读“游戏掉线了，请尽快重新登录”。
    *   **喵提醒/Webhook**：支持微信推送和自定义 HTTP 回调。
3.  **智能防误触**：
    *   检测到关键字后进行 15秒 持续验证。
    *   确认掉线后，每 60秒 推送一次通知。
4.  **诊断工具**：
    *   **[新增] OCR 诊断模式**：可以在设置中上传截图，查看机器到底识别出了什么文字，方便调试。

## 快速开始

### 第一步：获取喵码 (可选，用于微信通知)
1.  打开浏览器访问 [喵提醒官网](http://miaotixing.com/)。
2.  注册账号并登录。
3.  关注“喵提醒”微信公众号。
4.  在后台创建一个新的提醒，您将获得一个**“喵码”**（例如：`t123456`）。

### 第二步：配置 GameWatch
1.  打开本应用。
2.  点击右上角的 **设置 (Settings)** 图标。
3.  **报警设置**：
    *   **本地语音告警**：建议开启。开启后，您可以点击“试听”测试音量。
    *   **喵提醒 喵码**：粘贴您获取的“喵码”。
4.  **OCR 诊断 (调试用)**：
    *   如果您发现掉线了没报警，可以在这里上传一张掉线时的截图。
    *   系统会显示识别到的“原文”和“处理后文本”，帮助您判断是否是关键字匹配问题。
5.  点击 **保存并返回**。

### 第三步：启动监控
1.  点击主界面中央的 **开始屏幕捕获** 按钮。
2.  在弹出的浏览器窗口中，选择 **“窗口”** 或 **“整个屏幕”**。
    *   *建议：直接选择游戏所在的窗口。*
3.  画面出现在应用中后，点击下方的 **恢复监控** 按钮。
4.  应用状态将变为 **监控中 (OCR)**。

## 常见问题
**Q: 需要 Google API Key 吗？**
A: **不需要**。此版本使用的是本地 OCR 引擎 (Tesseract.js)，模型文件会自动下载并在浏览器中运行。

**Q: 识别率不高怎么办？**
A: 
1. 确保游戏画面清晰，不要被其他窗口遮挡。
2. 可以在“设置”中使用“OCR 诊断工具”上传截图，看看系统识别出了什么。
3. 如果识别出的文字中间有空格（如“网 络 错 误”），系统已内置自动去空格逻辑，通常可以正常识别。

**Q: 报警太频繁/太慢？**
A: 可以在设置中调整“检测间隔”。默认每 5 秒检测一次。

**Q: 关闭网页后还在监控吗？**
A: 不在。网页关闭后监控即停止。

---

## 💻 极客模式：如何在本地电脑运行 (源码部署)

如果你想自己掌控一切，或者想修改代码，可以将其部署在自己的电脑上。即便是编程小白，按照以下步骤操作也能成功！

### 1. 准备工作 (下载工具)
你需要安装两个必备软件：**Git** (用于下载代码) 和 **Node.js** (用于运行环境)。

#### A. 安装 Git
1.  访问 [Git 官网下载页](https://git-scm.com/downloads)。
2.  根据你的电脑系统 (Windows/macOS) 下载安装包。
3.  安装时一路点击 **Next (下一步)** 即可，所有选项保持默认。

#### B. 安装 Node.js
1.  访问 [Node.js 官网](https://nodejs.org/)。
2.  下载左侧的 **LTS 版本** (长期支持版)，这个版本最稳定。
3.  下载后双击安装，同样一路点击 Next 即可。
4.  **检查是否成功**：
    *   按键盘上的 `Win + R` 键，输入 `cmd` 然后回车（Mac 用户打开“终端”）。
    *   在黑框框里输入 `node -v` 然后按回车。
    *   如果出现类似 `v18.x.x` 或 `v20.x.x` 的数字，说明安装成功！

### 2. 下载代码 (Clone)
1.  在你的电脑上找一个地方（比如桌面，或者 D 盘），新建一个文件夹叫 `GameWatch`。
2.  进入这个文件夹，在空白处**右键点击**：
    *   **Windows 11**: 选择 "Open in Terminal" 或 "Git Bash Here"。
    *   **Mac**: 在终端中输入 `cd` 然后把文件夹拖进去，按回车。
3.  输入以下命令把代码下载下来（复制粘贴，然后回车）：
    ```bash
    git clone https://github.com/YOUR_USERNAME/gamewatch-local.git
    ```
    *(注意：请将上面的地址替换为本项目的实际 GitHub 仓库地址。如果你不知道地址，可以直接在网页上点击绿色的 "Code" -> "Download ZIP"，然后解压)*

4.  进入下载好的代码文件夹：
    ```bash
    cd gamewatch-local
    ```
    *(提示：如果你的文件夹名字不一样，请输入 `cd` 后按空格，再输入文件夹的前几个字母，按 Tab 键自动补全)*

### 3. 安装与启动
1.  **安装依赖库** (这一步会下载 Tesseract 识别引擎等必要组件，可能需要几分钟，请耐心等待)：
    ```bash
    npm install
    ```
    *如果看到很多 `added x packages` 的提示，说明成功了。*

2.  **启动程序**：
    ```bash
    npm run dev
    ```

3.  **大功告成！**
    *   终端里会显示一个绿色的地址，通常是 `http://localhost:5173`。
    *   按住键盘上的 `Ctrl` 键，用鼠标点击那个链接（或者复制到浏览器地址栏打开）。
    *   现在，你已经成功在自己的电脑上运行了 GameWatch！

### 4. 构建生产版本 (进阶)
如果你想把这个工具放到服务器上，或者生成静态文件：
```bash
npm run build
```
构建完成后，生成的网页文件会放在 `dist` 文件夹里。